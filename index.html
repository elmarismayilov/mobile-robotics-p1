<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TurtleBot3 Data Handling Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Load Babel for JSX support -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Custom styles and font loading -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #030712; /* Deep Slate Background */
        }
        /* Custom scrollbar for content pane */
        .scroll-content::-webkit-scrollbar {
            width: 8px;
        }
        .scroll-content::-webkit-scrollbar-track {
            background: #111827; /* dark slate */
        }
        .scroll-content::-webkit-scrollbar-thumb {
            background: #4b5563; /* medium gray */
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- Icon Components (Lucide SVGs converted to React components) ---
        const RobotIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 11V2H8m8 0V11m-8 11V16.66a2 2 0 0 1 1-1.73l2.25-1.3c.63-.36 1.37-.36 2 0L15 15a2 2 0 0 1 1 1.73V22M4 14h16m-8-12V6m0 4V6m-4 0v4m8-4v4"></path></svg>;
        const DatabaseIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M3 5V19a9 3 0 0 0 9 3 9 3 0 0 0 9-3V5"></path></svg>;
        const ChipIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M10 8h4m-4 4h4m-4 4h4m-8-8H7m0 8h3m8-8h-3m0 8h-3"></path></svg>;
        const FilterIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>;
        const ActivityIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg>;
        const AlertTriangleIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m21.73 18-9-15-9 15h18z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>;
        const MapIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="12 2 2 7 12 12 22 7 12 2"/><line x1="2" x2="22" y1="17" y2="17"/><polyline points="12 12 2 17 12 22 22 17 12 12"/></svg>;
        const CompassIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><path d="m16.24 7.76-2.12 6.36-6.36 2.12 2.12-6.36z"/></svg>;
        const EyeIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>;
        const WorkflowIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="8" height="8" x="3" y="3" rx="2"/><path d="M7 11v4a2 2 0 0 0 2 2h4l1.5 1.5a.5.5 0 0 0 1 0L17 17h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-4"/></svg>;

        // --- Reusable Component Blocks ---

        const SensorCard = ({ icon: Icon, title, topic, description }) => (
            <div className="p-6 bg-slate-800/70 border border-slate-700 rounded-xl shadow-lg transition duration-300 hover:border-sky-500/50">
                <div className="flex items-center space-x-4 mb-4">
                    <Icon className="w-8 h-8 text-sky-400" />
                    <h3 className="text-xl font-semibold text-white">{title}</h3>
                </div>
                <p className="font-mono text-sm text-amber-300 mb-3">{topic}</p>
                <p className="text-slate-400 text-base">{description}</p>
            </div>
        );

        const DataNode = ({ name, output }) => (
            <div className="text-center">
                <div className="px-4 py-2 bg-slate-700 border border-sky-600 rounded-md shadow-md text-white font-mono">{name}</div>
                <div className="text-xs text-slate-500 mt-1">{output}</div>
            </div>
        );

        const Arrow = () => (
            <div className="text-sky-400 mx-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="rotate-0"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
            </div>
        );

        const ArrowLarge = () => (
            <div className="flex-1 h-0.5 bg-sky-600/50 relative">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#00A2E8" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className="absolute right-0 -top-[7px]"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
            </div>
        );
        
        const ProcessNode = ({ step, title, topic, color }) => (
            <div className="flex flex-col items-center text-center p-4">
                <div className={`p-4 rounded-full ${color} bg-slate-700/50 border border-slate-600 mb-3 text-3xl font-bold`}>
                    {step}
                </div>
                <div className={`text-xs font-mono mb-1 ${color}`}>{title}</div>
                <div className="text-lg font-bold text-white">{topic}</div>
            </div>
        );

        const FilterBlock = ({ title, children, color }) => (
            <div className="p-6 bg-slate-800 border border-slate-700 rounded-xl shadow-lg">
                <h4 className={`text-lg font-semibold mb-3 ${color}`}>{title}</h4>
                <ul className="list-disc list-outside text-slate-400 space-y-2 ml-4 text-base">
                    {children}
                </ul>
            </div>
        );

        const ModeBlock = ({ title, description, children }) => (
            <div className="p-5 bg-slate-900 border border-sky-800 rounded-lg shadow-inner">
                <h4 className="text-lg font-semibold text-sky-400 mb-1">{title}</h4>
                <p className="text-slate-400 text-sm mb-3">{description}</p>
                <ul className="list-none text-slate-300 space-y-1 text-sm">
                    {children}
                </ul>
            </div>
        );

        const ControlNode = ({ name }) => (
            <div className="w-full p-3 bg-slate-700 border border-sky-600 rounded-md text-center text-white font-mono shadow-md">{name}</div>
        );
        
        const ControlArrow = () => (
            <div className="h-6 w-0.5 bg-sky-600 my-2 relative">
                <div className="w-2 h-2 bg-sky-400 rotate-45 transform -translate-x-1/2 absolute bottom-0 left-1/2"></div>
            </div>
        );

        const DataOutputCard = ({ title, topic, description, color, children }) => (
            <div className="p-4 bg-slate-800/70 border border-slate-700 rounded-xl shadow-lg">
                <h4 className={`text-lg font-semibold mb-1 ${color}`}>{title}</h4>
                <p className="font-mono text-sm text-slate-500">{topic}</p>
                <p className="text-slate-400 text-base mt-2">{description}</p>
                {children}
            </div>
        );

        const ErrorRow = ({ source, error, mitigation }) => (
            <tr className="hover:bg-slate-800 transition duration-150 border-b border-slate-800">
                <td className="p-4 text-amber-300 font-mono font-bold">{source}</td>
                <td className="p-4 text-slate-300">{error}</td>
                <td className="p-4 text-sky-400">{mitigation}</td>
            </tr>
        );

        // --- Slide Data Configuration ---
        const slideData = [
            {
                title: "Data Handling in a Two-Mode Robot",
                subtitle: "Platform: TurtleBot3 Burger (ROS2)",
                icon: RobotIcon,
                content: () => (
                    <div className="grid lg:grid-cols-2 gap-10 h-full items-center">
                        <div>
                            <span className="text-sm font-mono tracking-widest text-sky-400 border border-sky-600 px-3 py-1 rounded-full mb-4 inline-block">SYSTEM ARCHITECTURE</span>
                            <h1 className="text-5xl font-extrabold text-white mb-6 leading-tight">Data Integration in Mobile Robotics</h1>
                            <p className="text-xl text-slate-300">Analysis of the perception and planning pipeline required for SLAM and autonomous navigation.</p>
                            <div className="mt-8 p-6 bg-slate-800/70 border border-slate-700 rounded-xl shadow-xl">
                                <h3 className="text-xl font-semibold text-sky-400 mb-3">Focus Areas</h3>
                                <ul className="list-disc list-inside space-y-2 text-slate-300 text-lg">
                                    <li>Data collection (LiDAR, IMU, Encoders)</li>
                                    <li>Processing, Filtering, and Localization</li>
                                    <li>Driving robot behaviors (Autonomous/Interactive)</li>
                                    <li>System limitations and mitigation strategies</li>
                                </ul>
                            </div>
                        </div>
                        <div className="h-full bg-slate-800/50 rounded-xl border border-slate-700 flex items-center justify-center p-8">
                            <img src="https://placehold.co/400x400/1e293b/a5f3fc?text=TurtleBot3+Model" alt="TurtleBot3 Model" className="rounded-lg opacity-80 shadow-2xl" />
                        </div>
                    </div>
                ),
            },
            {
                title: "Sensor Data Streams & ROS Topics",
                icon: DatabaseIcon,
                content: () => (
                    <div className="flex flex-col h-full">
                        <h2 className="text-3xl font-semibold text-white mb-8">Raw Input Sources and Data Types</h2>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-8 flex-grow">
                            <SensorCard icon={EyeIcon} title="LiDAR (360Â° Scan)" topic="/scan (LaserScan)" description="Obstacle position and boundary detection. Primary input for SLAM." />
                            <SensorCard icon={CompassIcon} title="IMU (Acc/Gyro)" topic="/imu/data (Imu)" description="Orientation and rotational velocity for state estimation and odometry fusion." />
                            <SensorCard icon={WorkflowIcon} title="Wheel Encoders" topic="/odom (Odometry)" description="Dead reckoning for local displacement (x, y, theta) and speed control." />
                        </div>
                        <div className="mt-12 p-6 bg-slate-800/70 border border-slate-700 rounded-xl">
                            <h3 className="text-xl font-semibold text-sky-400 mb-3 font-mono">Core Data Flow (Raw Input to Localization)</h3>
                            <div className="flex flex-wrap justify-between items-center text-lg font-mono text-amber-300">
                                <DataNode name="LiDAR Data" output="High-Frequency Point Data" />
                                <Arrow />
                                <DataNode name="Odom/IMU" output="Low-Drift Pose Estimation" />
                                <Arrow />
                                <DataNode name="Processing Node" output="SLAM Toolbox" />
                            </div>
                        </div>
                    </div>
                ),
            },
            {
                title: "The ROS2 Processing Chain",
                icon: ChipIcon,
                content: () => (
                    <div className="flex flex-col h-full">
                        <h2 className="text-3xl font-semibold text-white mb-8">System Architecture and Component Interaction</h2>
                        <div className="grid grid-cols-4 gap-4 flex-grow items-center">
                            <ProcessNode step="1" title="SENSING" topic="LiDAR/IMU" color="text-amber-300" />
                            <ArrowLarge />
                            <ProcessNode step="2" title="LOCALIZATION" topic="SLAM Toolbox" color="text-sky-400" />
                            <ArrowLarge />
                            <ProcessNode step="3" title="PATH PLANNING" topic="Nav2 Stack" color="text-emerald-400" />
                            <ArrowLarge />
                            <ProcessNode step="4" title="ACTUATION" topic="/cmd_vel" color="text-red-400" />
                        </div>
                        <div className="mt-8 p-6 bg-slate-800/70 border border-slate-700 rounded-xl">
                            <h3 className="text-xl font-semibold text-sky-400 mb-3 font-mono">Localization Output</h3>
                            <ul className="list-disc list-inside text-slate-300 space-y-1 ml-4">
                                <li>The SLAM Toolbox continuously updates the **Occupancy Grid Map (`/map`)**.</li>
                                <li>The global map is used by the **Nav2 Global Planner** for macro pathfinding.</li>
                                <li>Odometry corrections are fed back to the **State Estimator** for improved ego-motion tracking.</li>
                            </ul>
                        </div>
                    </div>
                ),
            },
            {
                title: "Data Cleaning & Error Mitigation",
                icon: FilterIcon,
                content: () => (
                    <div className="grid lg:grid-cols-2 gap-8 h-full">
                        <div className="space-y-6">
                            <FilterBlock title="LiDAR Filtering (Input Stage)" color="text-sky-400">
                                <li>**Range Filtering:** Removes invalid readings (e.g., beyond max range or too close).</li>
                                <li>**Downsampling/Voxelization:** Reduces data volume for faster scan matching in SLAM.</li>
                            </FilterBlock>
                            <FilterBlock title="Odometry Corrections (Fusion)" color="text-emerald-400">
                                <li>**EKF (Extended Kalman Filter):** Fuses noisy IMU, Odometry, and SLAM data.</li>
                                <li>**Global Alignment:** SLAM localization provides periodic, global drift correction for the EKF state.</li>
                            </FilterBlock>
                        </div>
                        <div className="space-y-6">
                            <FilterBlock title="Costmap Layers (Safety & Planning)" color="text-amber-400">
                                <li>**Inflation Layer:** Creates safety buffers around obstacles based on robot footprint.</li>
                                <li>**Voxel Layer:** Handles 3D obstacles (if relevant) and dynamic obstacle tracking.</li>
                            </FilterBlock>
                            <FilterBlock title="Behavioral Failures" color="text-red-400">
                                <li>**Path Obstruction:** Nav2 automatically triggers **Local Replanning** (DWA algorithm).</li>
                                <li>**Goal Timeout:** A safety timer prevents infinite loops during navigation failures.</li>
                            </FilterBlock>
                        </div>
                    </div>
                ),
            },
            {
                title: "Control Loop & Action System",
                icon: ActivityIcon,
                content: () => (
                    <div className="flex flex-col h-full">
                        <h2 className="text-3xl font-semibold text-white mb-8">Autonomous vs. Interactive Mode Logic</h2>
                        <div className="grid grid-cols-2 gap-8 flex-grow">
                            <div className="space-y-4">
                                <ModeBlock title="Autonomous Exploration Mode (SLAM)" description="Primary objective: Map unknown areas.">
                                    <li>**Goal Source:** `Nav2` (Behavior Tree: Explore)</li>
                                    <li>**Output:** Continuous map updates, low-speed movement.</li>
                                    <li>**Safety:** High inflation radius and low velocity settings.</li>
                                </ModeBlock>
                                <ModeBlock title="Interactive Navigation Mode (Goal-Driven)" description="Primary objective: Reach user-defined target." >
                                    <li>**Goal Source:** User input (RViz 2D Nav Goal)</li>
                                    <li>**Output:** Optimized trajectory to the target pose.</li>
                                    <li>**Safety:** Dynamic replanning based on immediate sensor input.</li>
                                </ModeBlock>
                            </div>
                            <div className="p-6 bg-slate-800/70 border border-slate-700 rounded-xl flex items-center justify-center">
                                <div className="w-full max-w-sm">
                                    <h3 className="text-xl font-semibold text-sky-400 mb-4 font-mono text-center">Control Loop Abstraction</h3>
                                    <div className="flex flex-col items-center">
                                        <ControlNode name="Perception (Sensor Topics)" />
                                        <ControlArrow />
                                        <ControlNode name="Localization (State Estimator)" />
                                        <ControlArrow />
                                        <ControlNode name="Planning (Global/Local Planners)" />
                                        <ControlArrow />
                                        <ControlNode name="Actuation (/cmd_vel)" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                ),
            },
            {
                title: "Risk Analysis & Contingency",
                icon: AlertTriangleIcon,
                content: () => (
                    <div className="flex flex-col h-full">
                        <h2 className="text-3xl font-semibold text-white mb-8">Critical Failure Modes and Remediation</h2>
                        <div className="p-0 bg-slate-800/70 border border-slate-700 rounded-xl overflow-hidden shadow-2xl">
                            <table className="min-w-full text-left text-sm font-mono">
                                <thead className="border-b border-slate-700 bg-slate-700/50">
                                    <tr>
                                        <th className="p-4 text-sky-400 font-semibold uppercase w-1/5">Failure Source</th>
                                        <th className="p-4 text-white font-semibold uppercase w-2/5">Error Mode / Symptom</th>
                                        <th className="p-4 text-white font-semibold uppercase w-2/5">Mitigation Strategy</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <ErrorRow source="ROS/Network" error="TF Tree Broken (robot pose lost)" mitigation="Dedicated Wi-Fi hotspot; ROS bridge health checks" />
                                    <ErrorRow source="Perception" error="Transparent obstacle detection failure" mitigation="Conservative inflation radius; operator supervision" />
                                    <ErrorRow source="Odometry" error="Wheel slip on high friction surface" mitigation="Weighting SLAM data higher than wheel data in EKF" />
                                    <ErrorRow source="Planning" error="Stuck in local minima (oscillation)" mitigation="Nav2 Recovery Behaviors (e.g., clear costmap, spin in place)" />
                                </tbody>
                            </table>
                        </div>
                        <div className="mt-8 p-4 bg-red-900/50 border border-red-700 rounded-lg text-red-400 font-mono text-sm shadow-inner">
                            <span className="text-red-400 font-bold mr-2">[FAILSAFE_PROTOCOL]</span> If localization (`/map` frame) is lost, robot velocity is automatically set to zero on `/cmd_vel`.
                        </div>
                    </div>
                ),
            },
        ];

        // --- Main App Component ---
        const App = () => {
            const [currentSlide, setCurrentSlide] = useState(0);
            const slide = slideData[currentSlide];

            return (
                <div className="min-h-screen flex items-center justify-center p-4 lg:p-12">
                    {/* Presentation Dashboard Container */}
                    <div className="w-full max-w-7xl aspect-video bg-slate-900 shadow-2xl rounded-2xl border border-slate-700 flex flex-col lg:flex-row overflow-hidden">
                        
                        {/* Sidebar */}
                        <div className="w-full lg:w-20 bg-slate-900 border-b lg:border-r border-slate-700 flex lg:flex-col items-center justify-center lg:justify-start py-4 lg:py-6 space-x-4 lg:space-x-0 lg:space-y-4 shadow-2xl z-10">
                            {slideData.map((slide, index) => (
                                <button
                                    key={index}
                                    onClick={() => setCurrentSlide(index)}
                                    className={`p-3 rounded-xl transition-all duration-200 ${
                                        currentSlide === index
                                            ? 'bg-sky-700/30 text-sky-400 shadow-lg shadow-sky-900/50'
                                            : 'text-slate-500 hover:text-sky-400 hover:bg-slate-700/50'
                                    }`}
                                >
                                    <slide.icon className="w-6 h-6" />
                                </button>
                            ))}
                        </div>

                        <div className="flex flex-col flex-grow h-full">
                            
                            {/* Status Bar / Header */}
                            <div className="flex flex-col sm:flex-row justify-between items-center h-auto sm:h-16 px-6 sm:px-8 py-3 sm:py-0 border-b border-slate-700 bg-slate-900/50 backdrop-blur-sm">
                                <div className="flex flex-wrap items-center space-x-4">
                                    <span className="text-xl lg:text-2xl font-bold text-sky-400/90">{slide.title}</span>
                                    <span className="text-sm font-mono text-slate-500">SLIDE {currentSlide + 1} / {slideData.length}</span>
                                </div>
                                <div className="mt-2 sm:mt-0 flex items-center space-x-4 text-slate-400 font-mono text-xs sm:text-sm">
                                    <span className="flex items-center"><span className="w-2 h-2 rounded-full bg-emerald-500 mr-2"></span>ROS2_NODE_UP</span>
                                    <span>BAT: 92%</span>
                                </div>
                            </div>

                            {/* Main Content Area */}
                            <div className="flex-grow p-6 lg:p-10 scroll-content overflow-y-auto">
                                {slide.content()}
                            </div>

                            {/* Footer / Navigation */}
                            <div className="h-14 flex justify-end items-center px-6 lg:px-8 border-t border-slate-700 bg-slate-900/50">
                                <div className="space-x-4">
                                    <button
                                        onClick={() => setCurrentSlide(Math.max(0, currentSlide - 1))}
                                        disabled={currentSlide === 0}
                                        className="px-4 py-1.5 bg-slate-700 text-white rounded-lg disabled:opacity-50 hover:bg-slate-600 transition disabled:hover:bg-slate-700"
                                    >
                                        <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 inline-block mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
                                        Previous
                                    </button>
                                    <button
                                        onClick={() => setCurrentSlide(Math.min(slideData.length - 1, currentSlide + 1))}
                                        disabled={currentSlide === slideData.length - 1}
                                        className="px-4 py-1.5 bg-sky-600 text-white rounded-lg disabled:opacity-50 hover:bg-sky-500 transition disabled:hover:bg-sky-600"
                                    >
                                        Next
                                        <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 inline-block ml-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 18l6-6-6-6"/></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Render the App component
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>
</body>
</html>